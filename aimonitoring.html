<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ¤– AI Tourist Monitoring</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body {
  margin:0;
  font-family: 'Roboto', sans-serif;
  background:#0f172a;
  color:#f1f5f9;
}

.hero-slider {
  position: relative;
  height:200px;
  overflow:hidden;
  border-radius:12px;
  margin:15px;
}
.hero-slider img {
  width:100%;
  height:200px;
  object-fit:cover;
  position:absolute;
  top:0;
  left:0;
  opacity:0;
  transition:opacity 1s ease-in-out;
  border-radius:12px;
}
.hero-slider img.active { opacity:1; }

main {
  display:flex;
  flex-wrap:wrap;
  gap:20px;
  padding:15px;
  justify-content:center;
}
.card {
  background: rgba(255,255,255,0.05);
  border-radius:14px;
  padding:20px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.4);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  width:300px;
}
.card:hover { transform: translateY(-6px); box-shadow: 0 12px 25px rgba(0,0,0,0.6);}
.card h3 { color:#06b6d4; margin-bottom:10px; font-weight:500;}
.card p { color:#94a3b8; font-size:0.95rem; line-height:1.3;}
#map { height:250px; width:100%; border-radius:12px; margin-top:10px;}
.alert-box {
  position: fixed;
  top: 20px; /* moved down since header removed */
  left:50%;
  transform:translateX(-50%);
  background: rgba(220,38,38,0.95);
  color:#fff;
  padding:12px 20px;
  border-radius:12px;
  font-weight:bold;
  display:none;
  z-index:9999;
}
.log-panel {
  background: rgba(255,255,255,0.05);
  border-radius:10px;
  padding:10px;
  max-height:150px;
  overflow-y:auto;
  font-size:0.85rem;
  margin-top:10px;
}
input,textarea {
  width:100%;
  padding:10px;
  border-radius:10px;
  border:none;
  background:#1e293b;
  color:#fff;
  margin-top:5px;
}
input:focus,textarea:focus { outline:2px solid #06b6d4; }
button {
  padding:12px;
  border:none;
  border-radius:25px;
  cursor:pointer;
  background:linear-gradient(90deg,#06b6d4,#7c3aed);
  color:#fff;
  font-weight:bold;
  transition:0.3s;
  margin-top:10px;
}
button:hover { opacity:0.9; }

</style>
</head>
<body>

<div class="hero-slider">
  <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80" class="active" alt="Tourist view 1">
  
  <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1200&q=80" alt="Tourist view 3">
  
  <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80" alt="Tourist view 5">
</div>

<div class="alert-box" id="alertBox">âš  Alert!</div>

<main>
  <div class="card">
    <h3>Tourist Info</h3>
    <input type="text" id="touristName" placeholder="Name">
    <input type="text" id="touristId" placeholder="ID">
    <p>Enter details for monitoring and alerts.</p>
  </div>

  <div class="card">
    <h3>Monitoring Status</h3>
    <p>Detecting inactivity and route deviations in real-time.</p>
    <div class="log-panel" id="logPanel">No alerts yet.</div>
  </div>

  <div class="card">
    <h3>Live Location</h3>
    <div id="map"></div>
  </div>

  <div class="card">
    <h3>Safety Tips</h3>
    <p>Stay hydrated, follow local guidelines, and avoid restricted/danger-prone areas. Alerts will show automatically if deviation occurs.</p>
  </div>
</main>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// Hero slider
let slideIndex = 0;
const slides = document.querySelectorAll('.hero-slider img');
function showSlides(){
  slides.forEach(img => img.classList.remove('active'));
  slides[slideIndex].classList.add('active');
  slideIndex = (slideIndex+1)%slides.length;
}
setInterval(showSlides,3000);

// Map & monitoring
let map, touristMarker;
const alertBox = document.getElementById("alertBox");
const logPanel = document.getElementById("logPanel");

const plannedRoute = [
  [28.6139,77.2090],
  [28.6145,77.2150],
  [28.6155,77.2200]
];

function showAlert(msg){
  alertBox.textContent = msg;
  alertBox.style.display="block";
  setTimeout(()=>alertBox.style.display="none",5000);
  const time=new Date().toLocaleTimeString();
  if(logPanel.textContent==="No alerts yet.") logPanel.textContent="";
  logPanel.innerHTML += `<div>ðŸ•’ ${time} - ${msg}</div>`;
}

function initMap(lat,lng){
  map=L.map('map').setView([lat,lng],14);
  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(map);
  touristMarker=L.marker([lat,lng]).addTo(map).bindPopup("Tourist Location").openPopup();
  L.polyline(plannedRoute,{color:"#06b6d4",weight:4}).addTo(map).bindPopup("Planned Route");
}

// Inactivity & deviation
let lastLat=null,lastLng=null,lastMoveTime=Date.now();
function monitor(lat,lng){
  if(lastLat!==null && lastLng!==null){
    const distanceMoved = map.distance([lat,lng],[lastLat,lastLng]);
    if(distanceMoved<5 && Date.now()-lastMoveTime>60000) showAlert("âš  Tourist inactive for 1+ minute!");
    else if(distanceMoved>=5) lastMoveTime=Date.now();
  }
  lastLat=lat; lastLng=lng;

  let nearRoute=false;
  plannedRoute.forEach(p=>{
    if(map.distance([lat,lng],p)<50) nearRoute=true;
  });
  if(!nearRoute) showAlert("âš  Tourist deviated from planned route!");
}

if(navigator.geolocation){
  navigator.geolocation.watchPosition(pos=>{
    const lat=pos.coords.latitude;
    const lng=pos.coords.longitude;
    if(!map) initMap(lat,lng);
    touristMarker.setLatLng([lat,lng]).bindPopup("Tourist Location").openPopup();
    map.setView([lat,lng],14);
    monitor(lat,lng);
  }, err=>{console.warn(err);},{enableHighAccuracy:true,maximumAge:5000});
}else{alert("Geolocation not supported.");}
</script>

</body>
</html>
